{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/test/index.ts"],"names":[],"mappings":"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","sourcesContent":["import test = require('blue-tape')\r\nimport methods = require('methods')\r\nimport FormData = require('form-data')\r\nimport { readFileSync } from 'fs'\r\nimport { join } from 'path'\r\nimport * as popsicle from '../common'\r\n\r\nconst SHORTHAND_METHODS = [\r\n  'get',\r\n  'post',\r\n  'put',\r\n  'patch',\r\n  'del'\r\n]\r\n\r\nconst SUPPORTED_METHODS = typeof window === 'object' ? [\r\n  'get',\r\n  'post',\r\n  'put',\r\n  'patch',\r\n  'delete'\r\n] : methods.filter((method) => method !== 'connect')\r\n\r\nconst METHODS_WITHOUT_BODY = ['connect', 'head', 'options']\r\n\r\nconst REMOTE_URL = 'http://localhost:' + process.env.PORT\r\nconst REMOTE_HTTPS_URL = 'https://localhost:' + process.env.HTTPS_PORT\r\n\r\nconst EXAMPLE_BODY: any = {\r\n  username: 'blakeembrey',\r\n  password: 'hunter2'\r\n}\r\n\r\nconst BOUNDARY_REGEXP = /^multipart\\/form-data; boundary=([^;]+)/\r\n\r\nconst MULTIPART_SEP = '\\r\\n'\r\n\r\nconst supportsStatusText = parseFloat(process.version.replace(/^v/, '')) >= 0.12\r\n\r\ntest('should expose default functions', function (t) {\r\n  t.equal(typeof popsicle, 'object')\r\n  t.equal(typeof popsicle.Request, 'function')\r\n  t.equal(typeof popsicle.Response, 'function')\r\n  t.equal(typeof popsicle.form, 'function')\r\n  t.equal(typeof popsicle.jar, 'function')\r\n\r\n  SHORTHAND_METHODS.forEach(function (method) {\r\n    t.equal(typeof (popsicle as any)[method], 'function')\r\n  })\r\n\r\n  t.end()\r\n})\r\n\r\ntest('throw an error when no options are provided', function (t) {\r\n  t.throws(() => popsicle.request({} as any), /url must be a string/i)\r\n  t.end()\r\n})\r\n\r\ntest('create a popsicle#Request instance', function (t) {\r\n  const req = popsicle.request('/')\r\n\r\n  t.ok(req instanceof popsicle.Request)\r\n\r\n  req.set('Test', 'Test')\r\n  t.equal(req.rawHeaders.length, 2)\r\n\r\n  req.remove('Test')\r\n  t.equal(req.rawHeaders.length, 0)\r\n\r\n  // Ignore connection error.\r\n  return req.then(null, () => undefined)\r\n})\r\n\r\ntest('use the same response in promise chains', function (t) {\r\n  const req = popsicle.get(REMOTE_URL + '/echo')\r\n\r\n  t.plan(13)\r\n\r\n  return req\r\n    .then(function (res) {\r\n      t.ok(res instanceof popsicle.Response)\r\n\r\n      // Not all browsers support `responseURL`.\r\n      t.ok(typeof res.url === 'string' || res.url == null)\r\n      t.ok(Array.isArray(res.rawHeaders))\r\n\r\n      t.equal(typeof res.headers, 'object')\r\n      t.equal(typeof res.status, 'number')\r\n\r\n      t.equal(typeof res.get, 'function')\r\n      t.equal(typeof res.name, 'function')\r\n      t.equal(typeof res.type, 'function')\r\n      t.equal(typeof res.statusType, 'function')\r\n      t.equal(typeof res.toJSON, 'function')\r\n\r\n      t.deepEqual(Object.keys(req.toJSON()), ['url', 'method', 'headers', 'body', 'timeout'])\r\n      t.deepEqual(Object.keys(res.toJSON()), ['url', 'headers', 'body', 'status', 'statusText'])\r\n\r\n      return req\r\n        .then(function (res2) {\r\n          t.equal(res, res2)\r\n        })\r\n    })\r\n})\r\n\r\ntest('clone a request instance', function (t) {\r\n  const req = popsicle.get(REMOTE_URL + '/echo/header/x-example')\r\n\r\n  req.use(function (self, next) {\r\n    self.set('X-Example', 'foobar')\r\n    return next()\r\n  })\r\n\r\n  return Promise.all([req._promise, req.clone()._promise])\r\n    .then(function (res) {\r\n      t.notEqual(res[0], res[1])\r\n\r\n      t.equal(res[0].body, 'foobar')\r\n      t.equal(res[0].body, res[1].body)\r\n    })\r\n})\r\n\r\ntest('methods', function (t) {\r\n  t.test('use node-style callbacks', function (t) {\r\n    t.plan(1)\r\n\r\n    return popsicle.request(REMOTE_URL + '/echo')\r\n      .exec(function (err, res) {\r\n        t.ok(res instanceof popsicle.Response)\r\n        t.end(err)\r\n      })\r\n  })\r\n\r\n  t.test('allow methods to be passed in', function (t) {\r\n    return Promise.all(SUPPORTED_METHODS.map(function (method) {\r\n      return popsicle.request({\r\n        url: REMOTE_URL + '/echo/method',\r\n        method: method\r\n      })\r\n        .then(function (res) {\r\n          t.equal(res.status, 200)\r\n          t.equal(res.body, METHODS_WITHOUT_BODY.indexOf(method) === -1 ? method.toUpperCase() : '')\r\n        })\r\n    }))\r\n  })\r\n})\r\n\r\ntest('allow usage of method shorthands', function (t) {\r\n  return Promise.all(SHORTHAND_METHODS.map(function (method) {\r\n    return (popsicle as any)[method](REMOTE_URL + '/echo/method')\r\n      .then(function (res: any) {\r\n        t.equal(res.status, 200)\r\n        t.equal(res.body, method === 'del' ? 'DELETE' : method.toUpperCase())\r\n      })\r\n  }))\r\n})\r\n\r\ntest('response status', function (t) {\r\n  t.test('5xx', function (t) {\r\n    return popsicle.request(REMOTE_URL + '/error')\r\n      .then(function (res) {\r\n        t.equal(res.status, 500)\r\n        t.equal(res.statusType(), 5)\r\n\r\n        if (supportsStatusText) {\r\n          t.equal(res.statusText, 'Internal Server Error')\r\n        }\r\n      })\r\n  })\r\n\r\n  t.test('4xx', function (t) {\r\n    return popsicle.request(REMOTE_URL + '/not-found')\r\n      .then(function (res) {\r\n        t.equal(res.status, 404)\r\n        t.equal(res.statusType(), 4)\r\n\r\n        if (supportsStatusText) {\r\n          t.equal(res.statusText, 'Not Found')\r\n        }\r\n      })\r\n  })\r\n\r\n  t.test('2xx', function (t) {\r\n    return popsicle.request(REMOTE_URL + '/no-content')\r\n      .then(function (res) {\r\n        t.equal(res.status, 204)\r\n        t.equal(res.statusType(), 2)\r\n\r\n        if (supportsStatusText) {\r\n          t.equal(res.statusText, 'No Content')\r\n        }\r\n      })\r\n  })\r\n})\r\n\r\ntest('request headers', function (t) {\r\n  t.test('always send user agent', function (t) {\r\n    return popsicle.request(REMOTE_URL + '/echo/header/user-agent')\r\n      .then(function (res) {\r\n        const regexp = process.browser ?\r\n          /^Mozilla\\/.+$/ :\r\n          /^Popsicle \\(https:\\/\\/github\\.com\\/blakeembrey\\/popsicle\\)$/\r\n\r\n        t.ok(regexp.test(res.body))\r\n      })\r\n  })\r\n\r\n  if (!process.browser) {\r\n    t.test('send a custom user agent header', function (t) {\r\n      return popsicle.request({\r\n        url: REMOTE_URL + '/echo/header/user-agent',\r\n        headers: {\r\n          'User-Agent': 'foobar'\r\n        }\r\n      })\r\n        .then(function (res) {\r\n          t.equal(res.body, 'foobar')\r\n        })\r\n    })\r\n\r\n    // Run raw header tests on Node 0.12+.\r\n    if (!/^v0\\.10/.test(process.version)) {\r\n      t.test('case sensitive headers', function (t) {\r\n        return popsicle.get({\r\n          url: REMOTE_URL + '/raw-headers',\r\n          headers: {\r\n            'Raw-Header': 'test'\r\n          }\r\n        })\r\n          .then(function (res) {\r\n            t.ok(res.body.indexOf('Raw-Header') > -1, 'raw headers sent with original casing')\r\n          })\r\n      })\r\n    }\r\n  }\r\n})\r\n\r\ntest('response headers', function (t) {\r\n  t.test('parse', function (t) {\r\n    return popsicle.request(REMOTE_URL + '/notfound')\r\n      .then(function (res) {\r\n        t.equal(res.type(), 'text/html')\r\n        t.equal(res.get('Content-Type'), 'text/html; charset=utf-8')\r\n      })\r\n  })\r\n})\r\n\r\ntest('request body', function (t) {\r\n  t.test('send post data', function (t) {\r\n    return popsicle.request({\r\n      url: REMOTE_URL + '/echo',\r\n      method: 'POST',\r\n      body: 'example data',\r\n      headers: {\r\n        'content-type': 'application/octet-stream'\r\n      }\r\n    })\r\n      .then(function (res) {\r\n        t.equal(res.body, 'example data')\r\n        t.equal(res.status, 200)\r\n        t.equal(res.type(), 'application/octet-stream')\r\n\r\n        if (supportsStatusText) {\r\n          t.equal(res.statusText, 'OK')\r\n        }\r\n      })\r\n  })\r\n\r\n  t.test('should automatically send objects as json', function (t) {\r\n    return popsicle.request({\r\n      url: REMOTE_URL + '/echo',\r\n      method: 'POST',\r\n      body: EXAMPLE_BODY\r\n    })\r\n      .use(popsicle.plugins.parse('json'))\r\n      .then(function (res) {\r\n        t.deepEqual(res.body, EXAMPLE_BODY)\r\n        t.equal(res.type(), 'application/json')\r\n      })\r\n  })\r\n\r\n  t.test('should send as form encoded when header is set', function (t) {\r\n    return popsicle.request({\r\n      url: REMOTE_URL + '/echo',\r\n      method: 'POST',\r\n      body: EXAMPLE_BODY,\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded'\r\n      }\r\n    })\r\n      .use(popsicle.plugins.parse('urlencoded'))\r\n      .then(function (res) {\r\n        t.deepEqual(res.body, EXAMPLE_BODY)\r\n        t.equal(res.name('Content-Type'), 'content-type')\r\n        t.equal(res.type(), 'application/x-www-form-urlencoded')\r\n      })\r\n  })\r\n\r\n  t.test('host objects', function (t) {\r\n    t.test('form data', function (t) {\r\n      function validateResponse (res: any) {\r\n        const boundary = BOUNDARY_REGEXP.exec(res.headers['content-type'])[1]\r\n\r\n        let body = [\r\n          '--' + boundary,\r\n          'Content-Disposition: form-data; name=\"username\"',\r\n          '',\r\n          EXAMPLE_BODY.username,\r\n          '--' + boundary,\r\n          'Content-Disposition: form-data; name=\"password\"',\r\n          '',\r\n          EXAMPLE_BODY.password,\r\n          '--' + boundary + '--'\r\n        ].join(MULTIPART_SEP) + MULTIPART_SEP\r\n\r\n        t.equal(res.body, body)\r\n      }\r\n\r\n      t.test('should create form data instance', function (t) {\r\n        const form = popsicle.form(EXAMPLE_BODY)\r\n\r\n        t.ok(form instanceof FormData)\r\n\r\n        return popsicle.request({\r\n          url: REMOTE_URL + '/echo',\r\n          method: 'POST',\r\n          body: form\r\n        }).then(validateResponse)\r\n      })\r\n\r\n      t.test('should stringify to form data when set as multipart', function () {\r\n        return popsicle.request({\r\n          url: REMOTE_URL + '/echo',\r\n          method: 'POST',\r\n          body: EXAMPLE_BODY,\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          }\r\n        }).then(validateResponse)\r\n      })\r\n    })\r\n  })\r\n})\r\n\r\ntest('query', function (t) {\r\n  t.test('should stringify and send query parameters', function (t) {\r\n    return popsicle.request({\r\n      url: REMOTE_URL + '/echo/query',\r\n      query: EXAMPLE_BODY\r\n    })\r\n      .use(popsicle.plugins.parse('json'))\r\n      .then(function (res) {\r\n        t.deepEqual(res.body, EXAMPLE_BODY)\r\n      })\r\n  })\r\n\r\n  t.test('should stringify and append to query object', function (t) {\r\n    const req = popsicle.request({\r\n      url: REMOTE_URL + '/echo/query?query=true',\r\n      query: EXAMPLE_BODY\r\n    })\r\n\r\n    const query = {\r\n      query: 'true',\r\n      username: 'blakeembrey',\r\n      password: 'hunter2'\r\n    }\r\n\r\n    const fullUrl = REMOTE_URL + '/echo/query?query=true&username=blakeembrey&password=hunter2'\r\n\r\n    t.equal(req.url, fullUrl)\r\n    t.deepEqual(req.query, query)\r\n\r\n    return req\r\n      .use(popsicle.plugins.parse('json'))\r\n      .then(function (res) {\r\n        if (typeof window === 'undefined') {\r\n          t.equal(res.url, fullUrl)\r\n        }\r\n\r\n        t.deepEqual(res.body, query)\r\n      })\r\n  })\r\n\r\n  t.test('should accept query as a string', function (t) {\r\n    const req = popsicle.request({\r\n      url: REMOTE_URL + '/echo/query',\r\n      query: 'query=true'\r\n    })\r\n\r\n    t.equal(req.url, REMOTE_URL + '/echo/query?query=true')\r\n    t.deepEqual(req.query, { query: 'true' })\r\n\r\n    return req\r\n      .use(popsicle.plugins.parse('json'))\r\n      .then(function (res) {\r\n        t.deepEqual(res.body, { query: 'true' })\r\n      })\r\n  })\r\n})\r\n\r\ntest('timeout', function (t) {\r\n  t.test('should timeout the request when set', function (t) {\r\n    t.plan(3)\r\n\r\n    return popsicle.request({\r\n      url: REMOTE_URL + '/delay/1500',\r\n      timeout: 500\r\n    })\r\n      .catch(function (err) {\r\n        t.equal(err.message, 'Timeout of 500ms exceeded')\r\n        t.equal(err.code, 'ETIMEOUT')\r\n        t.ok(err.popsicle instanceof popsicle.Request)\r\n      })\r\n  })\r\n})\r\n\r\ntest('abort', function (t) {\r\n  t.test('abort before it starts', function (t) {\r\n    const req = popsicle.request(REMOTE_URL + '/echo')\r\n\r\n    req.abort()\r\n\r\n    t.plan(3)\r\n\r\n    return req\r\n      .catch(function (err) {\r\n        t.equal(err.message, 'Request aborted')\r\n        t.equal(err.code, 'EABORT')\r\n        t.ok(err.popsicle instanceof popsicle.Request)\r\n      })\r\n  })\r\n\r\n  t.test('abort mid-request', function (t) {\r\n    const req = popsicle.request(REMOTE_URL + '/download')\r\n\r\n    t.plan(1)\r\n\r\n    setTimeout(() => req.abort(), 100)\r\n\r\n    return req\r\n      .catch(function (err) {\r\n        t.equal(err.code, 'EABORT')\r\n      })\r\n  })\r\n\r\n  t.test('no side effects of aborting twice', function (t) {\r\n    const req = popsicle.request(REMOTE_URL + '/download')\r\n\r\n    t.plan(3)\r\n\r\n    req.abort()\r\n    req.abort()\r\n\r\n    return req\r\n      .catch(function (err) {\r\n        t.equal(err.message, 'Request aborted')\r\n        t.equal(err.code, 'EABORT')\r\n        t.ok(err.popsicle instanceof popsicle.Request)\r\n      })\r\n  })\r\n\r\n  t.test('abort cloned requests', function (t) {\r\n    const req = popsicle.request(REMOTE_URL + '/download')\r\n    const req2 = req.clone()\r\n\r\n    t.plan(2)\r\n\r\n    req.abort()\r\n\r\n    return Promise.all([\r\n      req.catch(err => t.equal(err.code, 'EABORT')),\r\n      req2.catch(err => t.equal(err.code, 'EABORT'))\r\n    ])\r\n  })\r\n})\r\n\r\ntest('progress', function (t) {\r\n  t.test('download', function (t) {\r\n    t.test('download progress', function (t) {\r\n      const req = popsicle.request(REMOTE_URL + '/download')\r\n\r\n      t.plan(typeof window === 'undefined' ? 3 : 2)\r\n\r\n      // Before the request has started.\r\n      t.equal(req.downloaded, 0)\r\n\r\n      // Check halfway into the response.\r\n      if (typeof window === 'undefined') {\r\n        setTimeout(\r\n          function () {\r\n            t.equal(req.downloaded, 0.5)\r\n          },\r\n          100\r\n        )\r\n      }\r\n\r\n      return req\r\n        .then(function () {\r\n          t.equal(req.downloaded, 1)\r\n        })\r\n    })\r\n  })\r\n\r\n  t.test('event', function (t) {\r\n    t.test('emit progress events', function (t) {\r\n      const req = popsicle.request({\r\n        url: REMOTE_URL + '/echo',\r\n        body: EXAMPLE_BODY,\r\n        method: 'POST'\r\n      })\r\n\r\n      t.plan(3)\r\n\r\n      let expected = 0\r\n\r\n      req.on('progress', function () {\r\n        expected += 0.5\r\n\r\n        t.equal(this.completed, expected)\r\n      })\r\n\r\n      return req\r\n        .use(popsicle.plugins.parse('json'))\r\n        .then(function (res) {\r\n          t.deepEqual(res.body, EXAMPLE_BODY)\r\n        })\r\n    })\r\n  })\r\n})\r\n\r\ntest('response body', function (t) {\r\n  t.test('parse json responses', function (t) {\r\n    return popsicle.request(REMOTE_URL + '/json')\r\n      .use(popsicle.plugins.parse('json'))\r\n      .then(function (res) {\r\n        t.equal(res.type(), 'application/json')\r\n        t.deepEqual(res.body, { username: 'blakeembrey' })\r\n      })\r\n  })\r\n\r\n  t.test('parse form encoded responses', function (t) {\r\n    return popsicle.request(REMOTE_URL + '/foo')\r\n      .use(popsicle.plugins.parse('urlencoded'))\r\n      .then(function (res) {\r\n        t.equal(res.type(), 'application/x-www-form-urlencoded')\r\n        t.deepEqual(res.body, { foo: 'bar' })\r\n      })\r\n  })\r\n\r\n  t.test('string response by default', function (t) {\r\n    return popsicle.request({\r\n      url: REMOTE_URL + '/json'\r\n    })\r\n      .then(function (res) {\r\n        t.equal(res.type(), 'application/json')\r\n        t.equal(res.body, '{\"username\":\"blakeembrey\"}')\r\n      })\r\n  })\r\n\r\n  t.test('empty response bodies', function (t) {\r\n    return popsicle.request({\r\n      url: REMOTE_URL + '/echo',\r\n      method: 'post'\r\n    })\r\n      .then(function (res) {\r\n        t.equal(res.body, '')\r\n      })\r\n  })\r\n\r\n  t.test('empty response body with json', function (t) {\r\n    return popsicle.request({\r\n      url: REMOTE_URL + '/echo',\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n      .use(popsicle.plugins.parse('json'))\r\n      .then(function (res) {\r\n        t.equal(res.body, null)\r\n        t.equal(res.type(), 'application/json')\r\n      })\r\n  })\r\n\r\n  t.test('throw on unsupported type', function (t) {\r\n    t.plan(2)\r\n\r\n    return popsicle.request({\r\n      url: REMOTE_URL + '/text',\r\n      transport: popsicle.createTransport({ type: 'foobar' })\r\n    })\r\n      .catch(function (err) {\r\n        t.equal(err.message, 'Unsupported type: foobar')\r\n        t.equal(err.code, 'ETYPE')\r\n      })\r\n  })\r\n\r\n  if (!process.browser) {\r\n    const fs = require('fs')\r\n    const concat = require('concat-stream')\r\n    const filename = require('path').join(__dirname, '../../scripts/server.js')\r\n    const filecontents = fs.readFileSync(filename, 'utf-8')\r\n\r\n    t.test('stream the response body', function (t) {\r\n      return popsicle.request({\r\n        url: REMOTE_URL + '/json',\r\n        transport: popsicle.createTransport({ type: 'stream' })\r\n      })\r\n        .then(function (res) {\r\n          t.equal(typeof res.body, 'object')\r\n\r\n          return new Promise<void>(function (resolve) {\r\n            res.body.pipe(concat(function (data: Buffer) {\r\n              t.equal(data.toString(), '{\"username\":\"blakeembrey\"}')\r\n\r\n              return resolve()\r\n            }))\r\n          })\r\n        })\r\n    })\r\n\r\n    t.test('should break when response body is bigger than buffer size', function (t) {\r\n      t.plan(1)\r\n\r\n      return popsicle.request(REMOTE_URL + '/urandom')\r\n        .catch(function (err) {\r\n          t.equal(err.code, 'ETOOLARGE')\r\n        })\r\n    })\r\n\r\n    t.test('pipe streams', function (t) {\r\n      return popsicle.request({\r\n        url: REMOTE_URL + '/echo',\r\n        body: fs.createReadStream(filename)\r\n      })\r\n        .then(function (res) {\r\n          t.equal(res.body, filecontents)\r\n        })\r\n    })\r\n\r\n    t.test('pipe streams into forms', function (t) {\r\n      return popsicle.request({\r\n        url: REMOTE_URL + '/echo',\r\n        body: popsicle.form({\r\n          file: fs.createReadStream(filename)\r\n        })\r\n      })\r\n        .then(function (res) {\r\n          const boundary = BOUNDARY_REGEXP.exec(res.get('content-type'))[1]\r\n\r\n          t.equal(res.body, [\r\n            '--' + boundary,\r\n            'Content-Disposition: form-data; name=\"file\"; filename=\"server.js\"',\r\n            'Content-Type: application/javascript',\r\n            '',\r\n            filecontents,\r\n            '--' + boundary + '--'\r\n          ].join(MULTIPART_SEP) + MULTIPART_SEP)\r\n        })\r\n    })\r\n\r\n    t.test('unzip contents', function (t) {\r\n      return popsicle.request({\r\n        url: REMOTE_URL + '/echo/zip',\r\n        body: fs.createReadStream(filename)\r\n      })\r\n        .then(function (res) {\r\n          t.equal(res.get('Content-Encoding'), 'deflate')\r\n          t.equal(res.body, filecontents)\r\n        })\r\n    })\r\n\r\n    t.test('unzip with gzip encoding', function (t) {\r\n      return popsicle.request({\r\n        url: REMOTE_URL + '/echo/zip',\r\n        body: fs.createReadStream(filename),\r\n        headers: {\r\n          'Accept-Encoding': 'gzip'\r\n        }\r\n      })\r\n        .then(function (res) {\r\n          t.equal(res.get('Content-Encoding'), 'gzip')\r\n          t.equal(res.body, filecontents)\r\n        })\r\n    })\r\n  } else {\r\n    t.test('browser response type', function (t) {\r\n      return popsicle.request({\r\n        url: REMOTE_URL + '/text',\r\n        transport: popsicle.createTransport({ type: 'arraybuffer' })\r\n      })\r\n        .then(function (res) {\r\n          t.ok(res.body instanceof ArrayBuffer)\r\n        })\r\n    })\r\n  }\r\n})\r\n\r\ntest('request errors', function (t) {\r\n  t.test('error when requesting an unknown domain', function (t) {\r\n    t.plan(3)\r\n\r\n    return popsicle.request('http://fdahkfjhuehfakjbvdahjfds.fdsa')\r\n      .catch(function (err) {\r\n        t.ok(/Unable to connect/i.exec(err.message))\r\n        t.equal(err.code, 'EUNAVAILABLE')\r\n        t.ok(err.popsicle instanceof popsicle.Request)\r\n      })\r\n  })\r\n\r\n  t.test('give a parse error on invalid json response', function (t) {\r\n    t.plan(3)\r\n\r\n    return popsicle.request({\r\n      url: REMOTE_URL + '/echo',\r\n      method: 'POST',\r\n      body: 'username=blakeembrey&password=hunter2',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n      .use(popsicle.plugins.parse('json'))\r\n      .catch(function (err) {\r\n        t.ok(/Unable to parse response body/i.test(err.message))\r\n        t.equal(err.code, 'EPARSE')\r\n        t.ok(err.popsicle instanceof popsicle.Request)\r\n      })\r\n  })\r\n\r\n  t.test('give a parse error on invalid response type', function (t) {\r\n    t.plan(3)\r\n\r\n    return popsicle.request({\r\n      url: REMOTE_URL + '/echo',\r\n      method: 'POST',\r\n      body: 'hello world',\r\n      headers: {\r\n        'Content-Type': 'foo/bar'\r\n      }\r\n    })\r\n      .use(popsicle.plugins.parse('json'))\r\n      .catch(function (err) {\r\n        t.equal(err.message, 'Unhandled response type: foo/bar')\r\n        t.equal(err.code, 'EPARSE')\r\n        t.ok(err.popsicle instanceof popsicle.Request)\r\n      })\r\n  })\r\n\r\n  t.test('give a stringify error on invalid request body', function (t) {\r\n    const obj: any = {}\r\n\r\n    t.plan(3)\r\n\r\n    // Recursive link will fail to stringify.\r\n    obj.obj = obj\r\n\r\n    return popsicle.request({\r\n      url: REMOTE_URL + '/echo',\r\n      method: 'POST',\r\n      body: obj\r\n    })\r\n      .catch(function (err) {\r\n        t.ok(/Unable to stringify request body/i.test(err.message))\r\n        t.equal(err.code, 'ESTRINGIFY')\r\n        t.ok(err.popsicle instanceof popsicle.Request)\r\n      })\r\n  })\r\n})\r\n\r\ntest('plugins', function (t) {\r\n  t.test('modify the request', function (t) {\r\n    const req = popsicle.request(REMOTE_URL + '/echo')\r\n\r\n    t.plan(1)\r\n\r\n    req.use(function (self, next) {\r\n      t.equal(self, req)\r\n      return next()\r\n    })\r\n\r\n    return req\r\n  })\r\n})\r\n\r\ntest('request flow', function (t) {\r\n  t.test('before', function (t) {\r\n    t.test('run a function before opening the request', function (t) {\r\n      const req = popsicle.request(REMOTE_URL + '/echo')\r\n\r\n      t.plan(2)\r\n\r\n      req.use(function (self, next) {\r\n        t.equal(self, req)\r\n        t.equal(typeof next, 'function')\r\n        return next()\r\n      })\r\n\r\n      return req\r\n    })\r\n\r\n    t.test('fail the request before starting', function (t) {\r\n      const req = popsicle.request(REMOTE_URL + '/echo')\r\n\r\n      t.plan(1)\r\n\r\n      req.use(function (): any {\r\n        throw new Error('Hello world!')\r\n      })\r\n\r\n      return req\r\n        .catch(function (err) {\r\n          t.equal(err.message, 'Hello world!')\r\n        })\r\n    })\r\n\r\n    t.test('accept a promise to delay the request', function (t) {\r\n      const req = popsicle.request({\r\n        url: REMOTE_URL + '/echo',\r\n        method: 'POST',\r\n        body: 'success'\r\n      })\r\n\r\n      t.plan(2)\r\n\r\n      req.use(function (self, next) {\r\n        return new Promise<void>(function (resolve) {\r\n          setTimeout(\r\n            function () {\r\n              t.equal(self, req)\r\n              resolve()\r\n            },\r\n            10\r\n          )\r\n        }).then(next)\r\n      })\r\n\r\n      return req\r\n        .then(res => {\r\n          t.equal(res.body, 'success')\r\n        })\r\n    })\r\n  })\r\n\r\n  test('after', function (t) {\r\n    t.test('run after the response', function (t) {\r\n      const req = popsicle.request(REMOTE_URL + '/echo')\r\n\r\n      t.plan(1)\r\n\r\n      req.use(function (_, next) {\r\n        return next()\r\n          .then(res => {\r\n            t.ok(res instanceof popsicle.Response)\r\n\r\n            return res\r\n          })\r\n      })\r\n\r\n      return req\r\n    })\r\n  })\r\n})\r\n\r\nif (!process.browser) {\r\n  test('cookie jar', function (t) {\r\n    t.test('should work with a cookie jar', function (t) {\r\n      let cookie: string\r\n\r\n      const instance = popsicle.defaults({\r\n        transport: popsicle.createTransport({\r\n          jar: popsicle.jar()\r\n        })\r\n      })\r\n\r\n      return instance(REMOTE_URL + '/cookie')\r\n        .then(function (res) {\r\n          t.notOk(res.get('Cookie'))\r\n          t.ok(res.get('Set-Cookie'))\r\n\r\n          cookie = res.get('Set-Cookie').split(/ *; */, 1)[0]\r\n\r\n          return instance(REMOTE_URL + '/echo')._promise\r\n        })\r\n        .then(function (res) {\r\n          t.equal(res.get('Cookie'), cookie)\r\n          t.notOk(res.get('Set-Cookie'))\r\n        })\r\n    })\r\n\r\n    t.test('should update over redirects', function (t) {\r\n      const instance = popsicle.defaults({\r\n        transport: popsicle.createTransport({\r\n          jar: popsicle.jar()\r\n        })\r\n      })\r\n\r\n      return instance(REMOTE_URL + '/cookie/redirect')\r\n        .then(function (res) {\r\n          t.ok(/^new=cookie/.test(res.body))\r\n        })\r\n    })\r\n  })\r\n}\r\n\r\ntest('override request mechanism', function (t) {\r\n  return popsicle.request({\r\n    url: '/foo',\r\n    transport: {\r\n      open () {\r\n        return Promise.resolve(new popsicle.Response({\r\n          url: '/foo',\r\n          body: 'testing',\r\n          headers: {},\r\n          status: 200,\r\n          statusText: 'OK'\r\n        }))\r\n      }\r\n    }\r\n  })\r\n    .then(function (res) {\r\n      t.equal(res.body, 'testing')\r\n    })\r\n})\r\n\r\nif (!process.browser) {\r\n  test('redirect', function (t) {\r\n    t.test('should follow 302 redirect with get', function (t) {\r\n      return popsicle.request(REMOTE_URL + '/redirect')\r\n        .then(function (res) {\r\n          t.equal(res.body, 'welcome get')\r\n          t.equal(res.status, 200)\r\n          t.ok(/\\/destination$/.test(res.url))\r\n        })\r\n    })\r\n\r\n    t.test('should follow 301 redirect with post', function (t) {\r\n      return popsicle.post(REMOTE_URL + '/redirect/code/301')\r\n        .then(function (res) {\r\n          t.equal(res.body, 'welcome get')\r\n          t.equal(res.status, 200)\r\n          t.ok(/\\/destination$/.test(res.url))\r\n        })\r\n    })\r\n\r\n    t.test('should follow 303 redirect with post', function (t) {\r\n      return popsicle.post({\r\n        url: REMOTE_URL + '/redirect/code/303',\r\n        body: { foo: 'bar' }\r\n      })\r\n        .then(function (res) {\r\n          t.equal(res.body, 'welcome get')\r\n          t.equal(res.status, 200)\r\n          t.ok(/\\/destination$/.test(res.url))\r\n        })\r\n    })\r\n\r\n    t.test('disable following redirects', function (t) {\r\n      return popsicle.request({\r\n        url: REMOTE_URL + '/redirect',\r\n        transport: popsicle.createTransport({\r\n          followRedirects: false\r\n        })\r\n      })\r\n        .then(function (res) {\r\n          t.equal(res.status, 302)\r\n          t.ok(/\\/redirect$/.test(res.url))\r\n        })\r\n    })\r\n\r\n    t.test('default maximum redirects of 5', function (t) {\r\n      t.plan(2)\r\n\r\n      return popsicle.request(REMOTE_URL + '/redirect/6')\r\n        .catch(function (err) {\r\n          t.equal(err.message, 'Exceeded maximum of 5 redirects')\r\n          t.equal(err.code, 'EMAXREDIRECTS')\r\n        })\r\n    })\r\n\r\n    t.test('change maximum redirects', function (t) {\r\n      return popsicle.request({\r\n        url: REMOTE_URL + '/redirect/6',\r\n        transport: popsicle.createTransport({\r\n          maxRedirects: 10\r\n        })\r\n      })\r\n        .then(function (res) {\r\n          t.equal(res.body, 'welcome get')\r\n          t.equal(res.status, 200)\r\n          t.ok(/\\/destination$/.test(res.url))\r\n        })\r\n    })\r\n\r\n    t.test('support head redirects with 307', function (t) {\r\n      return popsicle.head(REMOTE_URL + '/redirect/code/307')\r\n        .then(function (res) {\r\n          t.equal(res.body, '')\r\n          t.equal(res.status, 200)\r\n          t.ok(/\\/destination$/.test(res.url))\r\n        })\r\n    })\r\n\r\n    t.test('block 307/308 redirects by default', function (t) {\r\n      return popsicle.post(REMOTE_URL + '/redirect/code/307')\r\n        .then(function (res) {\r\n          t.equal(res.status, 307)\r\n          t.ok(/\\/redirect\\/code\\/307$/.test(res.url))\r\n        })\r\n    })\r\n\r\n    t.test('support user confirmed redirects with 308', function (t) {\r\n      return popsicle.post({\r\n        url: REMOTE_URL + '/redirect/code/308',\r\n        transport: popsicle.createTransport({\r\n          confirmRedirect () {\r\n            return true\r\n          }\r\n        })\r\n      })\r\n        .then(function (res) {\r\n          t.equal(res.body, 'welcome post')\r\n          t.equal(res.status, 200)\r\n          t.ok(/\\/destination$/.test(res.url))\r\n        })\r\n    })\r\n  })\r\n}\r\n\r\nif (!process.browser) {\r\n  test('https reject unauthorized', function (t) {\r\n    t.plan(1)\r\n\r\n    return popsicle.get({\r\n      url: `${REMOTE_HTTPS_URL}`\r\n    })\r\n      .catch(err => {\r\n        t.equal(err.code, 'EUNAVAILABLE')\r\n      })\r\n  })\r\n\r\n  test('https ca option', function (t) {\r\n    return popsicle.get({\r\n      url: `${REMOTE_HTTPS_URL}`,\r\n      transport: popsicle.createTransport({\r\n        ca: readFileSync(join(__dirname, '../../scripts/support/ca-crt.pem'))\r\n      })\r\n    })\r\n      .then(res => {\r\n        t.equal(res.body, 'Success')\r\n      })\r\n  })\r\n\r\n  test('https disable reject unauthorized', function (t) {\r\n    return popsicle.get({\r\n      url: `${REMOTE_HTTPS_URL}`,\r\n      transport: popsicle.createTransport({\r\n        rejectUnauthorized: false\r\n      })\r\n    })\r\n      .then(res => {\r\n        t.equal(res.body, 'Success')\r\n      })\r\n  })\r\n}\r\n"]}